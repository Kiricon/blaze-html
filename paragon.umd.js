!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?e(exports):"function"==typeof define&&define.amd?define(["exports"],e):e(t.paragon={})}(this,function(t){const e=new Map;class s{constructor(t,e,s,n=g){this.strings=t,this.values=e,this.type=s,this.partCallback=n}getHTML(){const t=this.strings.length-1;let e="",s=!0;for(let n=0;n<t;n++){const t=this.strings[n];e+=t;const r=l(t);e+=(s=r>-1?r<t.length:s)?o:i}return e+=this.strings[t]}getTemplateElement(){const t=document.createElement("template");return t.innerHTML=this.getHTML(),t}}function n(t,s,n=function(t){let s=e.get(t.type);void 0===s&&(s=new Map,e.set(t.type,s));let n=s.get(t.strings);return void 0===n&&(n=new c(t,t.getTemplateElement()),s.set(t.strings,n)),n}){const i=n(t);let o=s.__templateInstance;if(void 0!==o&&o.template===i&&o._partCallback===t.partCallback)return void o.update(t.values);o=new v(i,t.partCallback,n),s.__templateInstance=o;const r=o._clone();o.update(t.values),x(s,s.firstChild),s.appendChild(r)}const i=`{{lit-${String(Math.random()).slice(2)}}}`,o=`\x3c!--${i}--\x3e`,r=new RegExp(`${i}|${o}`),a=/[ \x09\x0a\x0c\x0d]([^\0-\x1F\x7F-\x9F \x09\x0a\x0c\x0d"'>=/]+)[ \x09\x0a\x0c\x0d]*=[ \x09\x0a\x0c\x0d]*(?:[^ \x09\x0a\x0c\x0d"'`<>=]*|"[^"]*|'[^']*)$/;function l(t){const e=t.lastIndexOf(">");return t.indexOf("<",e+1)>-1?t.length:e}class h{constructor(t,e,s,n,i){this.type=t,this.index=e,this.name=s,this.rawName=n,this.strings=i}}class c{constructor(t,e){this.parts=[],this.element=e;const s=document.createTreeWalker(this.element.content,133,null,!1);let n=-1,o=0;const l=[];let c,u;for(;s.nextNode();){n++,c=u;const e=u=s.currentNode;if(1===e.nodeType){if(!e.hasAttributes())continue;const s=e.attributes;let l=0;for(let t=0;t<s.length;t++)s[t].value.indexOf(i)>=0&&l++;for(;l-- >0;){const i=a.exec(t.strings[o])[1],l=s.getNamedItem(i),c=l.value.split(r);this.parts.push(new h("attribute",n,l.name,i,c)),e.removeAttribute(l.name),o+=c.length-1}}else if(3===e.nodeType){const t=e.nodeValue;if(t.indexOf(i)<0)continue;const s=e.parentNode,a=t.split(r),l=a.length-1;o+=l,e.textContent=a[l];for(let t=0;t<l;t++)s.insertBefore(document.createTextNode(a[t]),e),this.parts.push(new h("node",n++))}else if(8===e.nodeType&&e.nodeValue===i){const t=e.parentNode,s=e.previousSibling;null===s||s!==c||s.nodeType!==Node.TEXT_NODE?t.insertBefore(document.createTextNode(""),e):n--,this.parts.push(new h("node",n++)),l.push(e),null===e.nextSibling?t.insertBefore(document.createTextNode(""),e):n--,u=c,o++}}for(const t of l)t.parentNode.removeChild(t)}}const u=(t,e)=>p(e)?(e=e(t),d):null===e?void 0:e,p=t=>"function"==typeof t&&!0===t.__litDirective,d={},f=t=>null===t||!("object"==typeof t||"function"==typeof t);class m{constructor(t,e,s,n){this.instance=t,this.element=e,this.name=s,this.strings=n,this.size=n.length-1,this._previousValues=[]}_interpolate(t,e){const s=this.strings,n=s.length-1;let i="";for(let o=0;o<n;o++){i+=s[o];const n=u(this,t[e+o]);if(n&&n!==d&&(Array.isArray(n)||"string"!=typeof n&&n[Symbol.iterator]))for(const t of n)i+=t;else i+=n}return i+s[n]}_equalToPreviousValues(t,e){for(let s=e;s<e+this.size;s++)if(this._previousValues[s]!==t[s]||!f(t[s]))return!1;return!0}setValue(t,e){if(this._equalToPreviousValues(t,e))return;const s=this.strings;let n;2===s.length&&""===s[0]&&""===s[1]?(n=u(this,t[e]),Array.isArray(n)&&(n=n.join(""))):n=this._interpolate(t,e),n!==d&&this.element.setAttribute(this.name,n),this._previousValues=t}}class _{constructor(t,e,s){this.instance=t,this.startNode=e,this.endNode=s,this._previousValue=void 0}setValue(t){if((t=u(this,t))!==d)if(f(t)){if(t===this._previousValue)return;this._setText(t)}else t instanceof s?this._setTemplateResult(t):Array.isArray(t)||t[Symbol.iterator]?this._setIterable(t):t instanceof Node?this._setNode(t):void 0!==t.then?this._setPromise(t):this._setText(t)}_insert(t){this.endNode.parentNode.insertBefore(t,this.endNode)}_setNode(t){this._previousValue!==t&&(this.clear(),this._insert(t),this._previousValue=t)}_setText(t){const e=this.startNode.nextSibling;t=void 0===t?"":t,e===this.endNode.previousSibling&&e.nodeType===Node.TEXT_NODE?e.textContent=t:this._setNode(document.createTextNode(t)),this._previousValue=t}_setTemplateResult(t){const e=this.instance._getTemplate(t);let s;this._previousValue&&this._previousValue.template===e?s=this._previousValue:(s=new v(e,this.instance._partCallback,this.instance._getTemplate),this._setNode(s._clone()),this._previousValue=s),s.update(t.values)}_setIterable(t){Array.isArray(this._previousValue)||(this.clear(),this._previousValue=[]);const e=this._previousValue;let s=0;for(const n of t){let t=e[s];if(void 0===t){let n=this.startNode;if(s>0){n=e[s-1].endNode=document.createTextNode(""),this._insert(n)}t=new _(this.instance,n,this.endNode),e.push(t)}t.setValue(n),s++}if(0===s)this.clear(),this._previousValue=void 0;else if(s<e.length){const t=e[s-1];e.length=s,this.clear(t.endNode.previousSibling),t.endNode=this.endNode}}_setPromise(t){this._previousValue=t,t.then(e=>{this._previousValue===t&&this.setValue(e)})}clear(t=this.startNode){x(this.startNode.parentNode,t.nextSibling,this.endNode)}}const g=(t,e,s)=>{if("attribute"===e.type)return new m(t,s,e.name,e.strings);if("node"===e.type)return new _(t,s,s.nextSibling);throw new Error(`Unknown part type ${e.type}`)};class v{constructor(t,e,s){this._parts=[],this.template=t,this._partCallback=e,this._getTemplate=s}update(t){let e=0;for(const s of this._parts)void 0===s.size?(s.setValue(t[e]),e++):(s.setValue(t,e),e+=s.size)}_clone(){const t=document.importNode(this.template.element.content,!0),e=this.template.parts;if(e.length>0){const s=document.createTreeWalker(t,133,null,!1);let n=-1;for(let t=0;t<e.length;t++){const i=e[t];for(;n<i.index;)n++,s.nextNode();this._parts.push(this._partCallback(this,i,s.currentNode))}}return t}}const x=(t,e,s=null)=>{let n=e;for(;n!==s;){const e=n.nextSibling;t.removeChild(n),n=e}},y=(t,e,s)=>{if("attribute"===e.type){if(e.rawName.startsWith("on-")){return new class{constructor(t,e,s){this.instance=t,this.element=e,this.eventName=s}setValue(t){const e=u(this,t),s=this._listener;e!==s&&(this._listener=e,null!=s&&this.element.removeEventListener(this.eventName,s),null!=e&&this.element.addEventListener(this.eventName,e))}}(t,s,e.rawName.slice(3))}if(e.name.endsWith("$")){const n=e.name.slice(0,-1);return new m(t,s,n,e.strings)}if(e.name.endsWith("?")){return new class extends m{setValue(t,e){const s=this.strings;if(2!==s.length||""!==s[0]||""!==s[1])throw new Error("boolean attributes can only contain a single expression");{const s=u(this,t[e]);if(s===d)return;s?this.element.setAttribute(this.name,""):this.element.removeAttribute(this.name)}}}(t,s,e.name.slice(0,-1),e.strings)}return new class extends m{setValue(t,e){const s=this.strings;let n;this._equalToPreviousValues(t,e)||((n=2===s.length&&""===s[0]&&""===s[1]?u(this,t[e]):this._interpolate(t,e))!==d&&(this.element[this.name]=n),this._previousValues=t)}}(t,s,e.rawName,e.strings)}return g(t,e,s)};var N=function(t){this.state=t||{},this._subscriptions=[]};N.prototype.getState=function(){return this.state},N.prototype.subscribe=function(t){this._subscriptions.push(t)},N.prototype.setState=function(t){var e=this.state,s={};for(var n in this.state)s[n]=this.state[n];for(var i in t)s[i]=t[i];this.state=s,this._callSubcriptions(e)},N.prototype._callSubcriptions=function(t){for(var e=0;e<this._subscriptions.length;e++)this._subscriptions[e](this.state,t)};var b=function(t){return new N(t)},w=function(t){function e(){var e=this;t.call(this),this._state=b({}),this.state=this._state.getState(),this._state.subscribe(function(t){n(e.template(t),e.shadowRoot?e.shadowRoot:e)})}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.connectedCallback=function(){"function"==typeof this.connected&&this.connected()},e.prototype.setState=function(t){this._state.setState(t),this.state=this._state.getState()},e.prototype.query=function(t){return this.shadowRoot?this.shadowRoot.querySelector(t):this.querySelector(t)},e}(HTMLElement);t.html=((t,...e)=>new s(t,e,"html",y)),t.register=function(t,e){e=e||!1;var s=function(t){function s(){t.call(this),e?(this.attachShadow({mode:"open"}),n(this.template(this.state),this.shadowRoot)):n(this.template(this.state),this)}return t&&(s.__proto__=t),(s.prototype=Object.create(t&&t.prototype)).constructor=s,s}(t);customElements.define([].concat(t.name).map(function(t,e){return t<"a"?0!==e?"-"+t.toLowerCase():t.toLowerCase():t}).join(""),s)},t.Paragon=w,t.createStore=b});
//# sourceMappingURL=paragon.umd.js.map
